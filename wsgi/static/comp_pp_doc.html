<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<title>comp_pp — comparing files easy</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7434 2012-05-11 21:06:27Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { /* line numbers */
  color: grey;
}

.code {
  background-color: #eeeeee
}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="comp-pp-comparing-files-easy">
<h1 class="title">comp_pp — comparing files easy</h1>

<div class="section" id="introduction">
<h1>Introduction</h1>
<p>Comparing file is useful to ensure the various version of a document
(latin1, utf-8 and html) are consistent, and have not deviated during
the PP phase.</p>
<p>This diff tool (comp_pp) is based on dwdiff. At the base, it compares
2 different text files while ignoring all the spacing differences.</p>
<p>To be able to compare an HTML file some another file (either text
itself or HTML), that file has to be transformed into a regular text
file, without all the HTML tags.</p>
<p>Internally, comp_pp will transform both files to make them closer to
each other. This transformation is driven by a CSS like language,
using selectors, classes,... This CSS only affects the HTML file(s)
given as input.</p>
<p>comp_pp includes a default set of CSS to perform sane transformations
that follow DP usual PPing. For instance, &lt;i&gt;...&lt;/i&gt; in the html
version will be transformed to &quot;_..._&quot; so that will not generate a
diff with another file. That should be enough for a normal project,
without having to define some specialized CSS rules.</p>
</div>
<div class="section" id="options">
<h1>Options</h1>
<div class="section" id="extract-and-process-footnotes-separately">
<h2>Extract and process footnotes separately</h2>
<p>If the two versions have footnotes, but they are not placed in the
same spot (i.e. after each paragraph for the text, and at the end of
the book for the html), they can be extracted and compared separately
with this option.</p>
<p>There is a best effort done with the files coming from th
rounds. However they are usually broken, thus finding all the
footnotes will fail, and the diff for the footnotes will not be done
at all.</p>
</div>
<div class="section" id="transform-small-caps">
<h2>Transform small caps</h2>
<p>Usually small caps in the text version are transformed in
uppercase. This transformation has to be done in the html too, so
these section will not generate a diff.</p>
<p>The default is to do nothing. The options are &quot;uppercase&quot;, &quot;lowercase&quot;
and &quot;title&quot;. &quot;title&quot; means capitalizing the first letter of each word
&quot;Like This&quot;.</p>
</div>
<div class="section" id="html-add-sidenote">
<h2>HTML: add [Sidenote: ...]</h2>
<p>To use when the text version has &quot;[Sidenote: ...]&quot;, and not the
html. This will add a &quot;[Sidenote: ...]&quot; in the HTML version, thus
suppressing the diff.</p>
</div>
<div class="section" id="html-add-illustration-tag">
<h2>HTML: add [Illustration ] tag</h2>
<p>See above.</p>
</div>
<div class="section" id="ignore-case-when-comparing">
<h2>Ignore case when comparing</h2>
<p>If there is too many unfixable case differences, use this option to
ignore them.</p>
</div>
<div class="section" id="suppress-non-breakable-spaces-between-numbers">
<h2>Suppress non-breakable spaces between numbers</h2>
<p>Some numbers can be written with an unbreakable space between them
(eg. 2_000). This removes them.</p>
</div>
<div class="section" id="html-use-greek-transliteration-in-title-attribute">
<h2>HTML: use greek transliteration in title attribute</h2>
<p>If the greek text in the html also includes the transliteration in the
title attribute, the diff will use it to compare with a latin1
version.</p>
</div>
<div class="section" id="html-suppress-zero-width-space">
<h2>HTML: suppress zero width space</h2>
<p>Some HTML contain zero-width spaces. Select this to remove them.</p>
</div>
<div class="section" id="html-do-not-use-default-transformation-css">
<h2>HTML: do not use default transformation CSS</h2>
<p>comp_pp include a set of relatively sane defaults, but they can create
issues with some documents. For instance &lt;i&gt; might be + instance of
the regular _. This option tells comp_pp to ignore that predefined
CSS. The downside is that more diffs may appear until a new
transformational CSS is in place.</p>
</div>
</div>
<div class="section" id="transformational-css">
<h1>Transformational CSS</h1>
<p>This is what drives the transformation of the html in a usable text
version ressembling the real text version produced by the PP.</p>
<p>For instance, here's how &lt;i&gt;...&lt;/i&gt; is tranformed into _..._.</p>
<blockquote>
i:before, i:after   { content: &quot;_&quot;; }</blockquote>
<p>This tells comp_pp to insert an underscore before and after the string
delimited by the &lt;i&gt; tag. On the left side is regular CSS selector. On
the right side is more or less standard CSS 3 property/value, although
only a few are implemented.</p>
<p>The removal of page numbers is done with this:</p>
<blockquote>
span[class^=&quot;pagenum&quot;] { display: none }</blockquote>
<p>This selects every span with a class starting with the string pagenum,
and suppresses it.</p>
<div class="section" id="selectors">
<h2>Selectors</h2>
<p>Most CSS 3 selectors should be supported. See
<a class="reference external" href="http://www.w3schools.com/cssref/css_selectors.asp">http://www.w3schools.com/cssref/css_selectors.asp</a></p>
</div>
<div class="section" id="properties-values">
<h2>Properties/Values</h2>
<p>Only a limited set of properties make sense for comp_pp. Some are from
CSS, some are new.</p>
<div class="section" id="content">
<h3>content</h3>
<p>Insert some content in a tag. Used in conjonction with the :before and
:after pseudo selector.</p>
<p>For instance:</p>
<blockquote>
br:before { content: &quot; &quot;; }</blockquote>
</div>
<div class="section" id="text-transform">
<h3>text-transform</h3>
<p>Transform the content inside the selected tags. The options are:</p>
<blockquote>
<ul class="simple">
<li>&quot;uppercase&quot;:  This text   --&gt;   THIS TEXT</li>
<li>&quot;lowercase&quot;:  This text   --&gt;   this text</li>
<li>&quot;capitalize&quot;: This text   --&gt;   This Text</li>
</ul>
</blockquote>
<p>For instance:</p>
<blockquote>
.smcap { text-transform:uppercase; }</blockquote>
</div>
<div class="section" id="replace-with-attr">
<h3>_replace_with_attr</h3>
<p>Replace the content inside the selected tags with the value of an
attribute.</p>
<p>For instance this is how part of the &quot;use greek transliteration in
title attribute&quot; option is implemented:</p>
<blockquote>
body *[lang=grc] { _replace_with_attr: &quot;title&quot;; }</blockquote>
</div>
<div class="section" id="display">
<h3>display</h3>
<p>How to display some content. Right now only &quot;none&quot; is supported, which
simply suppresses the content.</p>
<p>For instance:</p>
<blockquote>
span[class^=&quot;pagenum&quot;] { display: none }</blockquote>
</div>
<div class="section" id="text-replace">
<h3>text-replace</h3>
<p>Replaces the first string with the second. All instances will be
replaced.</p>
<p>For instance, to replace a divide symbol with a slash:</p>
<blockquote>
p { text-replace: &quot;⁄&quot; &quot;/&quot;; }</blockquote>
</div>
</div>
<div class="section" id="expectations-in-default-transformational-css">
<h2>Expectations in default transformational CSS</h2>
<div class="section" id="footnotes">
<h3>Footnotes</h3>
<p>In many document, the semantic of a footnote in html is lost because
they are put at the end of the file and look like any other
paragraph. Ideally, a document should include each footnote in a tag,
for instance a div with a footnote class. If this is not present,
comp_pp cannot find the end of the footnote, and sometimes not even
the start.</p>
</div>
<div class="section" id="page-numbers">
<h3>Page numbers</h3>
<p>The default CSS handles several types of declaration of page numbers:</p>
<blockquote>
<ul class="simple">
<li>span[class^=&quot;pagenum&quot;] { display: none }</li>
<li>p[class^=&quot;pagenum&quot;] { display: none }</li>
<li>p[class^=&quot;page&quot;] { display: none }</li>
<li>span[class^=&quot;pgnum&quot;] { display: none }</li>
<li>div[id^=&quot;Page_&quot;] { display: none }</li>
<li>div[class^=&quot;pagenum&quot;] { display: none }</li>
</ul>
</blockquote>
</div>
<div class="section" id="italics">
<h3>Italics</h3>
<p>Italics are surrounded by underscores. Same for cite, abbr, ...</p>
</div>
</div>
<div class="section" id="some-css-examples">
<h2>Some CSS examples</h2>
<div class="section" id="anchors">
<h3>Anchors</h3>
<p>By default anchors are expected to be surrounded by brackets. If it is
not the case in the html, this can be easily fixed with the following:</p>
<blockquote>
.fnanchor:before { content: &quot;[&quot;; } .fnanchor:after { content: &quot;]&quot;; }</blockquote>
</div>
<div class="section" id="miscellaneous">
<h3>Miscellaneous</h3>
<blockquote>
<ul class="simple">
<li>sup:before { content:&quot;^&quot;; }</li>
<li>table[summary=&quot;Table of Cases&quot;] td[class=&quot;lt&quot;]:after { content: &quot;,&quot;; }</li>
<li>li { text-replace: &quot;--&quot; &quot;—&quot;; }</li>
<li>h4:before, h4:after { content: &quot;_&quot;; }</li>
<li>a[id^=FNanchor_]:before { content: &quot;[&quot; } a[id^=FNanchor_]:after{ content: &quot;]&quot; }</li>
<li>span[lang]:before { content: &quot;_&quot; }</li>
</ul>
</blockquote>
</div>
</div>
</div>
</div>
</body>
</html>
